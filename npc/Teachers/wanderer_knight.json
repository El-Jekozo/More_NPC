[
  {
  	"//":"TODO write normal text not this bullshit parody of a writing, change spawn to cathedral or church with prob 5-20% (?)",
    "type": "npc",
    "id": "wanderer_knight",
    "name_unique": "Knight",
    "gender": "male",
    "name_suffix": "the Holy",
    "class": "wanderer_knight",
    "attitude": 0,
    "mission": 7,
    "chat": "wanderer_knight_1",
    "faction": "free_merchants",
	"mission_offered": "MISSION_wanderer_knight_1"
  },
  {
    "type": "npc_class",
    "id": "wanderer_knight",
    "name": { "str": "Knight" },
    "job_description": "Wandering knight.",
    "common": false,
    "bonus_str": { "rng": [ 1, 4 ] },
    "bonus_dex": { "rng": [ 1, 4 ] },
    "bonus_int": { "rng": [ 1, 4 ] },
    "bonus_per": { "rng": [ 1, 4 ] },
    "worn_override": "wanderer_knight_worn",
    "carry_override": "wanderer_knight_carried",
    "wield_override": "wanderer_knight_wield",
    "traits": [
	  { "group": "NPC_starting_traits" },
	  { "group": "Appearance_demographics" },
      { "trait": "OUTDOORSMAN" },
      { "trait": "PAINRESIST" }
    ],
    "skills": [
      { "skill": "ALL", "level": { "mul": [ { "one_in": 3 }, { "sum": [ { "dice": [ 2, 2 ] }, { "rng": [ 0, -4 ] } ] } ] } },
      { "skill": "fabrication", "bonus": { "rng": [ 3, 4 ] } },
      { "skill": "survival", "bonus": { "rng": [ 1, 2 ] } }
    ]
  },
  {
    "type": "item_group",
    "id": "wanderer_knight_worn",
    "subtype": "collection",
    "entries": [
      { "item": "armor_lightplate" },
      { "item": "boots_plate" },
      { "item": "gloves_plate" },
      { "item": "helmet_barbute" },
      { "item": "backpack_leather" },
      { "item": "bscabbard"},
      { "item": "cloak" }
    ]
  },
  {
    "type": "item_group",
    "id": "wanderer_knight_carried",
    "subtype": "collection",
    "entries": [ 
	{ "item": "waterskin" },
	{ "item": "meat_smoked" },
	{ "item": "cheese_hard" },
	{ "item": "brandy" }
	]
  },
  {
    "type": "item_group",
    "id": "wanderer_knight_carried",
    "subtype": "collection",
    "entries": [ 
	{ "item": "zweihander" }
	]
  },
  {
    "type": "talk_topic",
    "id": [ "wanderer_knight_1" ],
    "dynamic_line": {
      "npc_has_var": "wanderer_knight_truth", "type": "general", "context": "meeting", "value": "yes",
      "yes": "Ah, The Chosen One! What brings you to this sacred place?",
      "no": {"npc_has_var": "wanderer_knight_trust", "type": "general", "context": "flag", "value": "yes",
		"yes":"Ah, glad to see another living soul in this cursed world. What brings you to this sacred place?",
		"no":"Hmm..."
	  }
    },
    "responses": [
	  { 
	    "text": "About that job...",
        "condition": "has_assigned_mission",
		"trial": { "type": "CONDITION", 
			"condition": {
				"or":[
					{ "u_is_wearing": "holy_symbol_wood" },
					{ "u_is_wearing": "holy_symbol" }
				]
			}
		},
		"success": {"topic": "TALK_MISSION_INQUIRE"},
		"failure": {"topic": "wanderer_knight_nope"}
	  },
      { "text": "What's your story?", "topic": "wanderer_knight_Background" },
      { "text": "Do you need any help?",
		"condition": {"npc_has_var": "wanderer_knight_trust", "type": "general", "context": "flag", "value": "yes"},
		"trial": { "type": "CONDITION",
			"condition": {
				"or":[
					{ "u_is_wearing": "holy_symbol_wood" },
					{ "u_is_wearing": "holy_symbol" }
				]
			}
		},
		"success": {"topic": "TALK_MISSION_LIST"},
		"failure": {"topic": "wanderer_knight_nope"},
		"switch":true
	  },
      { "text": "Do you need any help?", "topic": "wanderer_knight_trust_check", "switch":true},
      { "text": "Can you teach me something?", "topic": "wanderer_knight_teach_check"},
      { "text": "Goodbye.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_trust_check",
    "dynamic_line": "Are you a believer?",
    "responses": [
      { 
	    "text": "I'm muslim.", 
		"topic": "TALK_DONE",
        "opinion": { "trust": -200, "value": -200 },
		"effect":"insult_combat"
	  },
      { "text": "I'm christian.",
		"trial": { "type": "CONDITION",
			"condition": {
				"or":[
					{ "u_is_wearing": "holy_symbol_wood" },
					{ "u_is_wearing": "holy_symbol" }
				]
			}
		},
		"success": {"topic": "wanderer_knight_trust_yes"},
		"failure": {"topic": "wanderer_knight_trust_no"}
	  },
      { "text": "I'm budhist", "topic": "wanderer_knight_trust_no" },
      { "text": "I'm jewish", "topic": "wanderer_knight_trust_no" },
      { "text": "I'm atheist.", "topic": "wanderer_knight_trust_no" },
      { "text": "I'm agnostic.", "topic": "wanderer_knight_trust_no" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_trust_no",
    "dynamic_line": "*slowly shake his head",
    "responses": [
      { "text": "...", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_trust_yes",
    "dynamic_line": "Ah, it's good to see another folower of our lord saviour Jesus Christ. Welcome, my brother.",
    "responses": [
      { "text": "...", "topic": "TALK_DONE",
	    "effect":[{"npc_add_var": "wanderer_knight_trust", "type": "general", "context": "flag", "value": "yes"}]
	  }
    ]
  }, 
  {
    "type": "talk_topic",
    "id": "wanderer_knight_Background",
    "dynamic_line": "I'm True Warrior of Pope!",
    "responses": [
      { "text": "Interesting", "topic": "TALK_NONE" },
      { "text": "I think your lying!!!", 
	    "condition": {"not":{"npc_has_var": "wanderer_knight_background", "type": "general", "context": "meeting", "value": "yes"}},
	    "trial": { "type": "PERSUADE", "difficulty": 8 },
		"success": { "topic": "wanderer_knight_truth" },
		"failure": { "topic": "wanderer_knight_lie" } 
	  }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_teach_check",
    "dynamic_line": "I teach only those who help holy warriors in need. Do you help holy warriors in need?",
    "responses": [
      { "text": "Yeah, bruh, i'm cool", "topic": "wanderer_knight_teach",
	    "condition": {"npc_has_var": "u_helped_wanderer_knight", "type": "general", "context": "meeting", "value": "yes"},
		"trial": { "type": "CONDITION", "condition": {"npc_has_var": "wanderer_knight_teach", "type": "general", "context": "meeting", "value": "yes"}},
		"success": {
			"effect":[
				{"u_buy_item": "manual_swordsmanship"},
				{"npc_add_var": "wanderer_knight_teach", "type": "general", "context": "meeting", "value": "no"}
			],
			"topic": "wanderer_knight_teach" 
		},
		"failure": { "topic": "wanderer_knight_teach_done" }
	  },
      { "text": "Sorry I'm muslim", "topic": "TALK_NONE"
	  }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_teach",
    "dynamic_line": "I learned all from it. You can take it now. Good luck!",
    "responses": [
      { "text": "Thanks my brudda", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_teach_done",
    "dynamic_line": "I already taught you all I knew.",
    "responses": [
      { "text": "Thanks again, teacher.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_truth",
    "dynamic_line": "Im just a boy in cool suit. Dont hurt me!!!",
    "responses": [
      { "text": "Ok, ok, i'll play along. But only if you start calling me 'The Chosen One'!", "topic": "wanderer_knight_1",
		"effect":[
			{"npc_add_var": "wanderer_knight_background", "type": "general", "context": "meeting", "value": "yes"},
			{"npc_add_var": "wanderer_knight_background_truth", "type": "general", "context": "meeting", "value": "yes"}
		]
	  }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_lie",
    "dynamic_line": "HOW DARE YOU SAY SOMETHING LIKE THAT!!!",
    "responses": [
      { "text": "...", "topic": "TALK_DONE",
		"effect":[{"npc_add_var": "wanderer_knight_background", "type": "general", "context": "meeting", "value": "yes"}]
	  }
    ]
  },
  {
    "type": "talk_topic",
    "id": "wanderer_knight_nope",
    "dynamic_line": "Where is your cross, my friend?",
    "responses": [
      { "text": "...", "topic": "TALK_DONE" }
    ]
  },
  {
    "id": "MISSION_wanderer_knight_1",
    "type": "mission_definition",
    "name": { "str": "Prove me that you are true warrior of the light" },
    "description": "Knight asked you to proof that you are true warrior of the light",
    "goal": "MGOAL_KILL_MONSTER_SPEC",
    "monster_species": "ZOMBIE",
    "monster_kill_goal": 100,
    "difficulty": 1,
    "value": 1000,
    "origins": [ "ORIGIN_SECONDARY" ],
    "followup": "MISSION_wanderer_knight_2",
    "dialogue": {
      "describe": "True Faith!!",
      "offer": "Prove me that you are true warrior of the light",
      "accepted": "I'll wait.",
      "rejected": "What are you, infidel?!",
      "advice": "God bless you!",
      "inquire": "I'm waiting.",
      "success": "It's good to see brother in faith.",
      "success_lie": "Um...",
      "failure": "What a shame."
	}
  },
  {
    "id": "MISSION_wanderer_knight_2",
    "type": "mission_definition",
    "name": { "str": "Kill Father Randalf" },
    "description": "Knight asked you to kill Father Randalf.",
    "goal": "MGOAL_KILL_MONSTER",
    "difficulty": 1,
    "value": 100,
  	"//":"TODO add brother Randalf",
    "start": {
      "assign_mission_target": {
		"om_terrain": "church",
		"om_terrain_replace": "house",
		"om_terrain_match_type":"PREFIX",
		"reveal_radius": 1,
		"random": true,
		"search_range": 100,
		"min_distance": 5
	  },
      "update_mapgen": { "place_monster": [ { "monster": "mon_zombie_tough", "x": 3, "y": 9, "target": true } ] }
    },
    "origins": [ "ORIGIN_SECONDARY" ],
    "followup": "MISSION_wanderer_knight_3",
    "dialogue": {
      "describe": "True Faith!!",
      "offer": "Kill Father Randalf",
      "accepted": "I'll wait.-2",
      "rejected": "What are you, infidel?!-2",
      "advice": "God bless you!-2",
      "inquire": "I'm waiting.-2",
      "success": "It's good to see brother in faith.-2",
      "success_lie": "Um...-2",
      "failure": "What a shame.-2"
	}
  },
  {
    "id": "MISSION_wanderer_knight_3",
    "type": "mission_definition",
    "name": { "str": "Find special relic" },
    "description": "Knight asked you to find special relic",
    "goal": "MGOAL_FIND_ITEM",
    "difficulty": 1,
    "value": 100,
  	"//":"TODO add special relic",
    "start": {
      "assign_mission_target": { 
		"om_terrain": "lab_surface_brick_blockC2",
		"om_special":"lab_surface_big",
		"om_terrain_replace": "field",
		"reveal_radius": 2,
		"search_range": 200,
		"min_distance": 50
	  },
      "update_mapgen": {
		"om_terrain": "lab_surface_brick_block2A0",
		"place_item": [ { "item": "small_relic", "x": 106, "y": 46, "target":true } ]
	  }
    },
	"end":{
		"effect":[
			{"npc_add_var": "u_helped_wanderer_knight", "type": "general", "context": "meeting", "value": "yes"},
			{"npc_add_var": "wanderer_knight_teach", "type": "general", "context": "meeting", "value": "yes"}
		]
	},
    "origins": [ "ORIGIN_SECONDARY" ],
    "dialogue": {
      "describe": "True Faith!!",
      "offer": "Find cool relic please",
      "accepted": "I'll wait.-3",
      "rejected": "What are you, infidel?!-3",
      "advice": "God bless you!-3",
      "inquire": "I'm waiting.-3",
      "success": "It's good to see brother in faith.-3",
      "success_lie": "Um...-3",
      "failure": "What a shame.-3"
	}
  }
]